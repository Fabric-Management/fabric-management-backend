# =============================================================================
# FABRIC MANAGEMENT SYSTEM - LOCAL ENVIRONMENT
# =============================================================================
# Single source of truth for all configuration
# DO NOT commit to git! Use .env.example as template

# =============================================================================
# ENVIRONMENT
# =============================================================================
SPRING_PROFILES_ACTIVE=local

# =============================================================================
# DATABASE - PostgreSQL
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_DB=fabric_management
POSTGRES_USER=fabric_user
POSTGRES_PASSWORD=change_me_use_strong_password

# HikariCP Connection Pool
DB_POOL_MAX_SIZE=10             # Maximum pool size (adjust based on load)
DB_POOL_MIN_IDLE=2              # Minimum idle connections
DB_CONNECTION_TIMEOUT=30000     # Connection timeout (ms) - 30 seconds
DB_IDLE_TIMEOUT=600000          # Idle timeout (ms) - 10 minutes
DB_MAX_LIFETIME=1800000         # Max lifetime (ms) - 30 minutes

# =============================================================================
# CACHE - Redis
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=change_me_strong_password  # Required for Docker, optional for local dev

# Redis Connection Pool (Lettuce)
REDIS_POOL_MAX_ACTIVE=8         # Maximum active connections
REDIS_POOL_MAX_IDLE=8           # Maximum idle connections
REDIS_POOL_MIN_IDLE=2           # Minimum idle connections
REDIS_CONNECTION_TIMEOUT=2000   # Connection timeout (ms)
REDIS_COMMAND_TIMEOUT=3000      # Command timeout (ms)

# Redis Cache TTL
CACHE_TTL=300000                # 5 minutes default (per service can override)

# =============================================================================
# MESSAGE BROKER - Kafka & Zookeeper
# =============================================================================
ZOOKEEPER_PORT=2181
KAFKA_PORT=9092
KAFKA_ADVERTISED_HOST=localhost
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# =============================================================================
# API GATEWAY
# =============================================================================
API_GATEWAY_PORT=8080

# =============================================================================
# MICROSERVICES - PORTS
# =============================================================================
USER_SERVICE_PORT=8081
CONTACT_SERVICE_PORT=8082
COMPANY_SERVICE_PORT=8083

# =============================================================================
# MICROSERVICES - INTER-SERVICE COMMUNICATION
# =============================================================================
# For Local: localhost | For Docker: will be overridden to service names
USER_SERVICE_HOST=localhost
CONTACT_SERVICE_HOST=localhost
COMPANY_SERVICE_HOST=localhost

# Full URLs (constructed from HOST:PORT)
USER_SERVICE_URL=http://localhost:8081
CONTACT_SERVICE_URL=http://localhost:8082
COMPANY_SERVICE_URL=http://localhost:8083

# =============================================================================
# SECURITY - JWT
# =============================================================================
JWT_SECRET=change_me_use_openssl_rand_base64_64
JWT_EXPIRATION=3600000           # 1 hour in milliseconds (production: 15 min recommended)
JWT_REFRESH_EXPIRATION=86400000  # 24 hours in milliseconds (production: 7 days max)
JWT_ALGORITHM=HS256              # HMAC SHA-256 (HS256, HS384, HS512)
JWT_ISSUER=fabric-management-system

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Login Attempt Tracking
SECURITY_LOGIN_ATTEMPT_MAX_ATTEMPTS=5                  # Max failed login attempts before lockout
SECURITY_LOGIN_ATTEMPT_LOCKOUT_DURATION_MINUTES=15    # Account lockout duration (minutes)

# Response Time Masking (Timing Attack Prevention)
SECURITY_RESPONSE_TIME_MASKING_MIN_MS=200             # Minimum response time (milliseconds)

# =============================================================================
# SECURITY - JWT
JWT_AUDIENCE=fabric-api

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================
NOTIFICATION_ENABLED=true         # Enable/disable notification features

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO                    # Global log level: TRACE, DEBUG, INFO, WARN, ERROR

# =============================================================================
# JVM OPTIONS (Optional)
# =============================================================================
# JAVA_OPTS=-Xmx512m -Xms256m

# =============================================================================
# MONITORING - JMX PORTS
# =============================================================================
USER_SERVICE_JMX_PORT=9011
CONTACT_SERVICE_JMX_PORT=9012
COMPANY_SERVICE_JMX_PORT=9013
